/**
* map editor CSS and JS library
*/
;;(function(){
    var hostPath = window.WEB_EDITOR || "//" + location.host + "/web_editor/";
    if(hostPath.lastIndexOf("/") != hostPath.length - 1){
    	hostPath += "/";
    }
	// var root = window.KDSEditorLibraryPath= "http://localhost:63342/editor/";
    var root = window.KDSEditorLibraryPath= hostPath + "editor/";
	//var root = window.KDSEditorLibraryPath= "http://10.61.48.81:8080/MapEditor-API/";
	//var root = window.KDSEditorLibraryPath= "http://localhost:8080//road/";
	// var root = "";
	var css = "css", script = "js", config = "data/config";
	// CSS
	var cssStore = [
			css + '/reset.css',
			css + '/map.css',
			css + '/app.css',
			css + '/feature-icons.css'
	];
    //当前app目录
    var appDir = 'app/road-editor';
	// SCRIPT 
	var scriptStore = [
	                   script + '/lib/lodash.js',
	                   script + '/lib/d3.v3.js',
	                   script + '/lib/osmauth.js',
	                   script + '/lib/jxon.js',
	                   script + '/lib/d3.typeahead.js',
	                   script + '/lib/d3.combobox.js',
	                   script + '/lib/d3.geo.tile.js',
	                   script + '/lib/d3.dimensions.js',
	                   script + '/lib/d3.trigger.js',
	                   script + '/lib/d3.jsonp.js',
	                   script + '/lib/d3.keybinding.js',
	                   script + '/lib/d3.curtain.js',
	                   script + '/lib/d3.one.js',
	                   script + '/lib/d3.value.js',
	                   script + '/lib/d3-compat.js',
	                   script + '/lib/bootstrap-tooltip.js',
	                   script + '/lib/bootstrap-pagination.js',
	                   script + '/lib/bootstrap-tabs.js',
	                   script + '/lib/rbush.js',
	                   script + '/lib/sexagesimal.js',
	                   script + '/lib/togeojson.js',
	                   script + '/lib/marked.js',
	                   script + '/lib/colorPicker.js',
	                   script + '/lib/bootstrap-timepicker.js',

	                   script + '/id/id.js',



	                   script + '/id/util.js',
	                   script + '/id/util/session_mutex.js',
	                   script + '/id/util/lass_extend.js',
	                   script + '/id/util/mapsheet.js',
		               script + '/id/util/line_calculate.js',


	                   config + '/imagery.js',
	                   config + '/operations-sprite.js',
	                   config + '/locales.js',
	                   config + '/id-store.js',
	                   config + '/constant.js',
	                   
	                   'data/presets/categories.js',
	                   'data/presets/defaults.js',
	                   'data/presets/fields.js',
	                   'data/presets/presets.js',
	                   'data/locales/en.js',
	                   'data/locales/zh_cn.js',
	                   
	                   

	                   script + "/id/geo.js",
	                   script + "/id/geo/extent.js",
	                   script + "/id/geo/intersection.js",
	                   script + "/id/geo/multipolygon.js",
	                   script + "/id/geo/raw_mercator.js",

	                   script + '/id/renderer/background.js',
	                   script + '/id/renderer/background_source.js',
	                   script + '/id/renderer/gpx_layer.js',
	                   script + '/id/renderer/tile_layer.js',
	                   script + '/id/renderer/map.js',
	                   script + '/id/renderer/overview.js',
	                   script + '/id/renderer/overview_background.js',

	                   script + "/id/svg.js",
	                   script + "/id/svg/areas.js",
	                   script + "/id/svg/defs.js",
	                   script + "/id/svg/labels.js",
	                   script + "/id/svg/lines.js",
	                   script + "/id/svg/midpoints.js",
	                   script + "/id/svg/points.js",
	                   script + "/id/svg/surface.js",
	                   script + "/id/svg/tag_classes.js",
	                   script + "/id/svg/turns.js",
	                   script + "/id/svg/vertices.js",
	                   script + "/id/svg/traffic.js",
	                   script + "/id/svg/roadcross.js",
					   script + "/id/svg/roadzlevel.js",
					   script + "/id/svg/speedcamera.js",
	                   script + "/id/svg/overview_surface.js",
	                   script + "/id/svg/overview_points.js",
                       script + "/id/svg/transaction_areas.js",


						appDir + "/svg/traffic.js",
						// appDir + "/svg/dvr_player.js",
						// appDir + "/svg/dvr.js",
						// appDir + "/svg/dvr_data_mgr.js",
//						appDir + "/svg/pic_player.js",
//						appDir + "/svg/pic_data_mgr.js",
						appDir + "/svg/road_cross_line.js",
        appDir + '/js/walkLinkDirection.js',

						script + "/id/svg/roadcross.js",
						script + "/id/svg/roadzlevel.js",
						script + "/id/svg/speedcamera.js",
						script + "/id/svg/overview_surface.js",
						script + "/id/svg/overview_points.js",
						script + "/id/svg/placename.js",
       					script + "/id/svg/searchpoint.js",
        				script + "/id/svg/divider.js",
						script + "/id/svg/effects.js",
        script + "/id/svg/walk_link.js",
        script + "/id/svg/walk_enter.js",
        script + "/id/svg/walk_areas.js",
						script + "/id/svg/detailslope.js",
						script + "/id/svg/walkzlevel.js",

	                   script + "/id/ui.js",
	                   script + '/id/ui/intro.js',
	                   script + '/id/ui/attribution.js',
	                   script + '/id/ui/radial_menu.js',
	                   script + '/id/ui/inspector.js',
	                   script + '/id/ui/modal.js',
	                   script + '/id/ui/cmd.js',
	                   script + '/id/ui/success.js',
	                   script + '/id/ui/loading.js',
	                   script + '/id/ui/background.js',
	                   script + '/id/ui/modes.js',
	                   script + '/id/ui/help.js',
	                   script + '/id/ui/zoom_level.js',
	                   script + '/id/ui/layermanager.js',
	                   script + '/id/ui/poi_search.js',
	                   script + '/id/ui/notice.js',
	                   script + '/id/ui/flash.js',
	                   script + '/id/ui/save.js',
	                   script + '/id/ui/scale.js',
	                   script + '/id/ui/spinner.js',
	                   //script + '/id/ui/restore.js',
	                   script + '/id/ui/lasso.js',
	                   script + '/id/ui/toggle.js',
	                   script + '/id/ui/undo_redo.js',
	                   script + '/id/ui/road_crossing.js',
	                   script + '/id/ui/zoom.js',
	                   script + '/id/ui/raw_tag_editor.js',
	                   script + '/id/ui/feature_list.js',
	                   script + '/id/ui/layer_pane.js',
	                   script + '/id/ui/search_list.js',
	                   script + '/id/ui/style_setting_list.js',
	                   script + '/id/ui/selection_list.js',
	                   script + '/id/ui/preset_list.js',
	                   script + '/id/ui/entity_editor.js',
	                   script + '/id/ui/disclosure.js',
	                   script + '/id/ui/sidebar.js',
	                //    script + '/id/ui/raw_relation_editor.js',
	                   script + '/id/ui/confirm.js',
	                   //script + '/id/ui/panorama.js',
	                   script + '/id/ui/infowindow.js',


                       // add
	                   script + '/id/ui/lasso_zoom.js',
	                   script + '/id/ui/toolbar.js',
					   script + '/id/ui/sublayer_list.js',

	                   script + '/id/ui/intro/navigation.js',
	                   script + '/id/ui/intro/point.js',
	                   script + '/id/ui/intro/area.js',
	                   script + '/id/ui/intro/line.js',
	                //    script + '/id/ui/intro/start_editing.js',

	                   script + '/id/actions.js',
	                   script + "/id/actions/add_midpoint.js",
	                   script + "/id/actions/add_member.js",
	                   script + '/id/actions/add_entity.js',
	                   script + '/id/actions/add_vertex.js',
	                   script + "/id/actions/split_road.js",
	                   script + '/id/actions/change_tags.js',
	                   script + '/id/actions/circularize.js',
	                   script + '/id/actions/connect.js',
	                   script + '/id/actions/delete_member.js',
	                   script + '/id/actions/delete_multiple.js',
	                   script + '/id/actions/delete_node.js',
	                   script + "/id/actions/delete_relation.js",
	                   script + "/id/actions/delete_way.js",
	                   script + '/id/actions/clone_multiple.js',
	                   script + '/id/actions/clone_way.js',
	                   script + '/id/actions/clone_roadway.js',
	                   script + '/id/actions/discard_tags.js',
	                   script + '/id/actions/disconnect.js',
	                   script + '/id/actions/join.js',
	                   script + '/id/actions/merge.js',
					   script + '/id/actions/wayjoin.js',
		               script + '/id/actions/waymerge.js',
	                   script + '/id/actions/merge_polygon.js',
	                   script + '/id/actions/move_node.js',
	                   script + '/id/actions/move.js',
	                   script + '/id/actions/move_line_split_tufu.js',
	                   script + '/id/actions/noop.js',
	                   script + '/id/actions/orthogonalize.js',
	                   script + '/id/actions/rotate_way.js',
	                   script + '/id/actions/restrict_turn.js',
	                   script + '/id/actions/reverse.js',
	                   script + '/id/actions/straighten.js',
	                   script + '/id/actions/split.js',
	                   script + '/id/actions/unrestrict_turn.js',
	                   script + '/id/actions/edit_relation.js',
					   script + '/id/actions/change_node_members.js',
					   script + '/id/actions/road_intersect.js',
						script + '/id/actions/expand_road.js',
        appDir + '/action/create_island.js',

	                   script + '/id/behavior.js',
	                   script + '/id/behavior/add_way.js',
	                   script + '/id/behavior/drag.js',
	                   script + '/id/behavior/draw.js',
	                   script + '/id/behavior/draw_way.js',
	                   script + '/id/behavior/edit.js',
	                   script + '/id/behavior/hover.js',
	                   script + '/id/behavior/lasso.js',
	                   script + '/id/behavior/select.js',
	                   script + '/id/behavior/tail.js',
        script + '/id/behavior/draw_island.js',

	                   //add
	                   script + '/id/behavior/lasso_zoom.js',

	                   script + '/id/modes.js',
	                   script + '/id/modes/add_area.js',
	                   script + '/id/modes/add_point.js',
	                   script + '/id/modes/add_line.js',
	                   script + '/id/modes/add_road.js',
	                   script + '/id/modes/browse.js',
	                   script + '/id/modes/drag_node.js',
	                   script + '/id/modes/draw_area.js',
	                   script + '/id/modes/draw_line.js',
	                   script + '/id/modes/move.js',
	                   script + '/id/modes/rotate_way.js',
        script + '/id/modes/add_walkroad.js',
        script + '/id/modes/add_walk_area.js',
        script + '/id/modes/add_island.js',
	                   script + '/id/modes/save.js',
	                   script + '/id/modes/select.js',
	                   script + '/id/modes/add_roadcross.js',
					   script + '/id/modes/add_speedcamera.js',
					   script + '/id/modes/add_zlevel.js',
					   script + '/id/modes/disconnect_road.js',

	                   //add
	                   script + '/id/modes/lasso_zoom.js',
	                   script + '/id/modes/toolbar.js',

	                   script + '/id/operations.js',
	                   script + '/id/operations/continue.js',
	                   script + '/id/operations/circularize.js',
	                   script + '/id/operations/orthogonalize.js',
	                   script + '/id/operations/straighten.js',
	                   script + '/id/operations/delete.js',
	                   script + '/id/operations/disconnect.js',
	                   script + '/id/operations/merge.js',
					   script + '/id/operations/waymerge.js',
	                   script + '/id/operations/move.js',
	                   script + '/id/operations/rotate.js',
	                   script + '/id/operations/reverse.js',
	                   script + '/id/operations/split.js',
	                   script + '/id/operations/clone.js',
	                   script + '/id/operations/copy.js',
	                   script + '/id/operations/traffic.js',
	                   script + '/id/operations/split_road.js',
					   script + '/id/operations/road_intersect.js',
		               script + '/id/operations/expand.js',

	                   // add 
	                   script + '/id/operations/rawposition.js',
	                   // script + '/id/panorama/qq_api_load.js',
	                   // script + '/id/panorama/require.js',
	                   
	                   script + '/id/core/layers.js',
	                   script + '/id/core/connection.js',
	                   script + '/id/core/difference.js',
	                   script + '/id/core/entity.js',
	                   script + '/id/core/graph.js',
	                   script + '/id/core/history.js',
	                   script + '/id/core/node.js',
	                   script + '/id/core/relation.js',
	                   script + '/id/core/way.js',
	                   script + '/id/core/tree.js',
	                   script + '/id/core/area_keys.js',
	                   script + '/id/core/oneway_tags.js',
	                   script + '/id/core/model_entity.js',
	                   script + '/id/core/infowindow.js',

	                   script + '/id/presets.js',
	                   script + '/id/presets/preset.js',
	                   script + '/id/presets/category.js',
	                   script + '/id/presets/collection.js',
	                   script + '/id/presets/field.js',

	                   script + '/id/validate.js',

	                   script + '/lib/locale.js',
	                   config + '/introGraph.js',

	                   'api/map-editor-api.src.v1.0.js'
	];
	
	//CSS WRITE
	for(var i = 0; i<cssStore.length; i++){
		var cssUri = "<link rel='stylesheet' type='text/css' href='"+ root + cssStore[i]+"'/>";
		document.write(cssUri);
	}
	
	//SCRIPT WRITE
	//for(var j = 0; j<scriptStore.length; j++){
	//	var doMain = scriptStore[j] === "js/id/panorama/require.js" ? "data-main='"+root+"js/id/panorama/panorama.js'" : '';
	//	var jsUri = "<script type='text/javascript' " + doMain + " src='"+ root + scriptStore[j]+"'></script>";
	//	document.write(jsUri);
	//}
	for(var j = 0; j<scriptStore.length; j++){
		var jsUri = "<script type='text/javascript' " +  scriptStore[j] + " src='"+ root + scriptStore[j]+"'></script>";
		document.write(jsUri);
	}
})();