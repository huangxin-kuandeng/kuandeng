{"ast":null,"code":"import { createVNode as _createVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, toDisplayString as _toDisplayString, Fragment as _Fragment, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\n\nconst _hoisted_1 = /*#__PURE__*/_createVNode(\"strong\", null, \"请确认是否所有数据已编辑完成并提交检查进入下一环节。\", -1);\n\nconst _hoisted_2 = {\n  class: \"dialog-footer\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"确 定\");\n\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"取 消\");\n\nconst _hoisted_5 = {\n  class: \"dialog-footer\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\"取 消\");\n\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\"确 定\");\n\nconst _hoisted_8 = {\n  class: \"contentSearch\"\n};\n\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\"报表\");\n\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\"刷新\");\n\nconst _hoisted_11 = /*#__PURE__*/_createTextVNode(\"保存\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n\n  const _component_el_option = _resolveComponent(\"el-option\");\n\n  const _component_el_select = _resolveComponent(\"el-select\");\n\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  const _component_el_form = _resolveComponent(\"el-form\");\n\n  const _component_el_button_group = _resolveComponent(\"el-button-group\");\n\n  return _openBlock(), _createBlock(_Fragment, null, [_createVNode(_component_el_dialog, {\n    title: \"信息确认\",\n    modelValue: $data.centerDialogVisible1,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.centerDialogVisible1 = $event),\n    width: \"30%\",\n    \"destroy-on-close\": \"\",\n    center: \"\"\n  }, {\n    footer: _withCtx(() => [_createVNode(\"span\", _hoisted_2, [_createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $options.autoCheckStatus\n    }, {\n      default: _withCtx(() => [_hoisted_3]),\n      _: 1\n    }, 8, [\"onClick\"]), _createVNode(_component_el_button, {\n      onClick: _cache[1] || (_cache[1] = $event => $data.centerDialogVisible1 = false)\n    }, {\n      default: _withCtx(() => [_hoisted_4]),\n      _: 1\n    })])]),\n    default: _withCtx(() => [_hoisted_1]),\n    _: 1\n  }, 8, [\"modelValue\"]), _createVNode(_component_el_dialog, {\n    title: \"信息确认\",\n    modelValue: $data.centerDialogVisible2,\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.centerDialogVisible2 = $event),\n    width: \"300px\"\n  }, {\n    footer: _withCtx(() => [_createVNode(\"span\", _hoisted_5, [_createVNode(_component_el_button, {\n      onClick: _cache[4] || (_cache[4] = $event => $data.centerDialogVisible2 = false)\n    }, {\n      default: _withCtx(() => [_hoisted_6]),\n      _: 1\n    }), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: _cache[5] || (_cache[5] = $event => $options.processPassStatus($data.passForm.isPass))\n    }, {\n      default: _withCtx(() => [_hoisted_7]),\n      _: 1\n    })])]),\n    default: _withCtx(() => [_createVNode(_component_el_form, {\n      model: $data.passForm\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"是否通过\",\n        \"label-width\": \"100px\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_select, {\n          modelValue: $data.passForm.isPass,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.passForm.isPass = $event),\n          placeholder: \"是否通过\",\n          \"popper-class\": \"isPassSelect\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_option, {\n            label: \"是\",\n            value: \"true\"\n          }), _createVNode(_component_el_option, {\n            label: \"否\",\n            value: \"false\"\n          })]),\n          _: 1\n        }, 8, [\"modelValue\"])]),\n        _: 1\n      })]),\n      _: 1\n    }, 8, [\"model\"])]),\n    _: 1\n  }, 8, [\"modelValue\"]), _createVNode(\"div\", _hoisted_8, [_createVNode(_component_el_button_group, null, {\n    default: _withCtx(() => [_createVNode(_component_el_button, {\n      class: \"btn-form\",\n      icon: \"el-icon-search\",\n      onClick: _cache[7] || (_cache[7] = $event => $options.form())\n    }, {\n      default: _withCtx(() => [_hoisted_9]),\n      _: 1\n    }), _createVNode(_component_el_button, {\n      class: \"btn-refresh\",\n      icon: \"el-icon-refresh\",\n      onClick: _cache[8] || (_cache[8] = $event => $options.refresh())\n    }, {\n      default: _withCtx(() => [_hoisted_10]),\n      _: 1\n    }), _createVNode(_component_el_button, {\n      class: \"btn-save\",\n      icon: \"el-icon-document-checked\",\n      onClick: _cache[9] || (_cache[9] = $event => $options.save())\n    }, {\n      default: _withCtx(() => [_hoisted_11]),\n      _: 1\n    }), _createVNode(_component_el_button, {\n      class: \"btn-finish\",\n      icon: \"el-icon-folder-checked\",\n      onClick: $options.finish\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString($data.finishText), 1)]),\n      _: 1\n    }, 8, [\"onClick\"])]),\n    _: 1\n  })])], 64);\n}","map":{"version":3,"sources":["D:\\web_editor_hd\\src\\main\\webapp\\batch-edit\\src\\components\\contentComponents\\contentSearch.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <el-dialog\n    title=\"信息确认\"\n    v-model=\"centerDialogVisible1\"\n    width=\"30%\"\n    destroy-on-close\n    center\n  >\n    <strong>请确认是否所有数据已编辑完成并提交检查进入下一环节。</strong>\n    <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"autoCheckStatus\">确 定</el-button>\n        <el-button @click=\"centerDialogVisible1 = false\">取 消</el-button>\n      </span>\n    </template>\n  </el-dialog>\n  <el-dialog title=\"信息确认\" v-model=\"centerDialogVisible2\" width=\"300px\">\n    <el-form :model=\"passForm\">\n      <el-form-item label=\"是否通过\" label-width=\"100px\">\n        <el-select\n          v-model=\"passForm.isPass\"\n          placeholder=\"是否通过\"\n          popper-class=\"isPassSelect\"\n        >\n          <el-option label=\"是\" value=\"true\"></el-option>\n          <el-option label=\"否\" value=\"false\"></el-option>\n        </el-select>\n      </el-form-item>\n    </el-form>\n    <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"centerDialogVisible2 = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"processPassStatus(passForm.isPass)\"\n          >确 定</el-button\n        >\n      </span>\n    </template>\n  </el-dialog>\n  <div class=\"contentSearch\">\n    <el-button-group>\n      <el-button class=\"btn-form\" icon=\"el-icon-search\" @click=\"form()\"\n        >报表</el-button\n      >\n      <el-button class=\"btn-refresh\" icon=\"el-icon-refresh\" @click=\"refresh()\"\n        >刷新</el-button\n      >\n      <el-button\n        class=\"btn-save\"\n        icon=\"el-icon-document-checked\"\n        @click=\"save()\"\n        >保存</el-button\n      >\n      <el-button\n        class=\"btn-finish\"\n        icon=\"el-icon-folder-checked\"\n        @click=\"finish\"\n        >{{ finishText }}</el-button\n      >\n    </el-button-group>\n  </div>\n</template>\n\n<script>\nimport * as sysApi from \"../../services/sys\";\nimport * as util from \"../../services/util\";\nexport default {\n  name: \"contentSearch\",\n  data() {\n    return {\n      passForm: {\n        isPass: \"true\",\n      },\n      modal: false,\n      centerDialogVisible1: false,\n      centerDialogVisible2: false,\n      cities: [],\n      value: \"\",\n      finishText: \"编辑完成\",\n    };\n  },\n  mounted() {\n    var role = util.isRoleAuth(this.$user);\n    if ([1, 3].includes(role)) {\n      this.finishText = \"编辑完成\";\n    }\n    if ([2, 3].includes(role)) {\n      this.finishText = \"质检完成\";\n    }\n  },\n  methods: {\n    form() {\n      this.$emit(\"refreshForm\");\n    },\n    refresh() {\n      this.$emit(\"refresh\");\n    },\n    save() {\n      this.$emit(\"finish\");\n    },\n    finish() {\n      if (!window.currentTask) {\n        return;\n      }\n      if (this.finishText == \"编辑完成\") {\n        this.centerDialogVisible2 = true;\n      } else {\n        this.centerDialogVisible2 = true;\n      }\n    },\n    finishToProcess(isPass) {\n      // 0：正在启动， 1：无需启动检查服务\n      if (isPass == \"0\") {\n        this.centerDialogVisible1 = false;\n        this.centerDialogVisible2 = false;\n        this.$emit(\"remakeTask\");\n      } else if (isPass == \"1\") {\n        this.processPassStatus(true);\n      }\n    },\n    processPassStatus(isPass) {\n      var $this = this;\n      var _checkData = {\n        taskId: \"\" + window.currentTask.id,\n        properties: [\n          {\n            id: \"passFlag\",\n            value: isPass + \"\",\n          },\n        ],\n      };\n      var $url = $this.$config.kts + \"form/form-data\";\n      sysApi\n        .postAsyncDatas({\n          url: $url,\n          data: _checkData,\n        })\n        .then((res) => {\n          console.log(res);\n          $this.centerDialogVisible1 = false;\n          $this.centerDialogVisible2 = false;\n          $this.$emit(\"remakeTask\");\n        });\n    },\n    // 完成时,先调用检查\n    autoCheckStatus() {\n      var $this = this;\n      var bodyParam = {\n        activityId: window.currentTask.formatTags.currentActivity, //工作流ID (tag中的currentActivity的值）环节名称\n        taskId: window.currentTask.taskId,\n      };\n      var $url = $this.$config.kts + \"dispatch/job/start\";\n      sysApi\n        .postAsyncDatas({\n          url: $url,\n          data: bodyParam,\n        })\n        .then((res) => {\n          if (res.code != \"0\") {\n            $this.$notify({\n              title: \"检查服务\",\n              message: \"启动检查服务失败: \" + res.message,\n              type: \"warning\",\n            });\n            $this.centerDialogVisible1 = false;\n            $this.centerDialogVisible2 = false;\n            return;\n          }\n          $this.finishToProcess(res.result);\n        });\n    },\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\">\n.contentSearch {\n  height: 40px;\n  float: left;\n  padding: 5px 10px;\n  position: absolute;\n  right: 0px;\n  z-index: 99;\n}\n.contentSearch button {\n  float: left;\n  padding: 0px 15px;\n  min-height: 30px;\n  height: 30px;\n  line-height: 30px;\n  width: auto;\n}\n.contentSearch .el-button-group {\n  float: left;\n  margin-left: 20px;\n}\n.contentSearch .el-button-group:last-child {\n  float: right;\n  margin-left: 0px;\n}\n.el-overlay {\n  z-index: 8999 !important;\n}\n.is-fullscreen {\n  z-index: 8999 !important;\n}\n.isPassSelect.el-popper {\n  z-index: 9111 !important;\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}