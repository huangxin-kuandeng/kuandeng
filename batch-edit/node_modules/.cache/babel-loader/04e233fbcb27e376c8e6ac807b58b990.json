{"ast":null,"code":"/* eslint-disable prettier/prettier */\nimport jq from \"jquery\"; // 获取最新配置\n\nexport function oauth2Client(url) {\n  var oauth2Client = {\n    ouc: {\n      user: null,\n      oauth2User: url,\n      clientId: \"client\",\n      clientSecret: \"secret\"\n    },\n    getNoHashUrl: function () {\n      return window.location.href.split(\"#\")[0];\n    },\n    begin: function (opts) {\n      opts = jq.extend({\n        clientId: false,\n        authorizeUrl: false,\n        redirectUri: window.location.href,\n        responseType: 'code'\n      }, opts);\n      window.location.href = opts.authorizeUrl + '?client_id=' + opts.clientId + '&response_type=' + opts.responseType + '&redirect_uri=' + opts.redirectUri;\n    },\n    user: function (url) {\n      jq.ajax({\n        type: \"get\",\n        url: url,\n        async: false,\n        data: {},\n        success: function (data) {\n          data = {\n            \"authorities\": [{\n              \"authority\": \"work\"\n            }],\n            \"details\": {\n              \"remoteAddress\": \"192.168.7.22\",\n              \"sessionId\": \"6776A9260CC06549C6744762F4090176\"\n            },\n            \"authenticated\": true,\n            \"principal\": {\n              \"userId\": 766372114,\n              \"username\": \"worker1\",\n              \"password\": \"35dfe5f0ee3303ea7bd2d43e0ad30112d9c38f178d8e750f099c243b\",\n              \"showname\": \"worker1\",\n              \"officeCode\": null,\n              \"roles\": [\"work\"],\n              \"authorities\": [{\n                \"authority\": \"work\"\n              }],\n              \"accountNonExpired\": true,\n              \"accountNonLocked\": true,\n              \"credentialsNonExpired\": true,\n              \"enabled\": true\n            },\n            \"credentials\": null,\n            \"name\": \"worker1\"\n          };\n\n          if (!data) {\n            oauth2Client.oAuthLoginPage();\n            return null;\n          }\n\n          return data;\n        },\n        error: function () {\n          alert(\"当前登录用户为空，请检查当前地址是否正确\");\n          return null;\n        }\n      });\n    },\n    oAuthLoginPage: function () {\n      oauth2Client.begin({\n        authorizeUrl: oauth2Client.ouc.oauth2User + \"/authorize\",\n        clientId: oauth2Client.ouc.clientId,\n        redirectUri: oauth2Client.getNoHashUrl()\n      });\n    },\n    end: function (opts, fn, errFn) {\n      opts = jq.extend({\n        code: false,\n        clientId: false,\n        clientSecret: false,\n        accessTokenUrl: false,\n        redirectUri: window.location.href,\n        userInfoUrl: false\n      }, opts);\n\n      if (!opts.code) {\n        return;\n      }\n\n      jq.ajax({\n        async: false,\n        url: opts.accessTokenUrl,\n        type: \"post\",\n        data: {\n          grant_type: \"authorization_code\",\n          client_id: opts.clientId,\n          client_secret: opts.clientSecret,\n          code: opts.code,\n          redirect_uri: opts.redirectUri\n        },\n        success: function (data) {\n          if (data) {\n            if (typeof data === 'string') {\n              data = jq.parseJSON(data);\n            }\n\n            var accessToken = data.access_token;\n            var expiresIn = data.expires_in;\n          }\n\n          fn(accessToken, expiresIn);\n        },\n        error: function (XMLHttpRequest, textStatus, errorThrown) {\n          errFn(XMLHttpRequest, textStatus, errorThrown);\n        },\n        complete: function (XMLHttpRequest, textStatus) {}\n      });\n    }\n  };\n  return oauth2Client;\n}","map":{"version":3,"sources":["D:/project/batch-edit/src/services/jquery.oauth2-client.js"],"names":["jq","oauth2Client","url","ouc","user","oauth2User","clientId","clientSecret","getNoHashUrl","window","location","href","split","begin","opts","extend","authorizeUrl","redirectUri","responseType","ajax","type","async","data","success","oAuthLoginPage","error","alert","end","fn","errFn","code","accessTokenUrl","userInfoUrl","grant_type","client_id","client_secret","redirect_uri","parseJSON","accessToken","access_token","expiresIn","expires_in","XMLHttpRequest","textStatus","errorThrown","complete"],"mappings":"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","sourcesContent":["/* eslint-disable prettier/prettier */\nimport jq from \"jquery\";\n// 获取最新配置\nexport function oauth2Client(url) {\n  var oauth2Client = {\n    ouc: {\n      user: null,\n      oauth2User: url,\n      clientId: \"client\",\n      clientSecret: \"secret\"\n    },\n    getNoHashUrl: function() {\n      return window.location.href.split(\"#\")[0];\n    },\n    begin: function(opts) {\n      opts = jq.extend({\n        clientId: false,\n        authorizeUrl: false,\n        redirectUri: window.location.href,\n        responseType: 'code'\n      }, opts);\n      window.location.href = opts.authorizeUrl + '?client_id=' +\n        opts.clientId + '&response_type=' + opts.responseType +\n        '&redirect_uri=' + opts.redirectUri;\n    },\n    user: function(url) {\n      jq.ajax({\n        type: \"get\",\n        url: url,\n        async: false,\n        data: {},\n        success: function(data) {\n\n          data = { \"authorities\": [{ \"authority\": \"work\" }], \"details\": { \"remoteAddress\": \"192.168.7.22\", \"sessionId\": \"6776A9260CC06549C6744762F4090176\" }, \"authenticated\": true, \"principal\": { \"userId\": 766372114, \"username\": \"worker1\", \"password\": \"35dfe5f0ee3303ea7bd2d43e0ad30112d9c38f178d8e750f099c243b\", \"showname\": \"worker1\", \"officeCode\": null, \"roles\": [\"work\"], \"authorities\": [{ \"authority\": \"work\" }], \"accountNonExpired\": true, \"accountNonLocked\": true, \"credentialsNonExpired\": true, \"enabled\": true }, \"credentials\": null, \"name\": \"worker1\" }\n\n          if (!data) {\n            oauth2Client.oAuthLoginPage();\n            return null;\n          }\n          return data;\n        },\n        error: function() {\n          alert(\"当前登录用户为空，请检查当前地址是否正确\");\n          return null;\n        },\n      });\n    },\n    oAuthLoginPage: function() {\n      oauth2Client.begin({\n        authorizeUrl: oauth2Client.ouc.oauth2User + \"/authorize\",\n        clientId: oauth2Client.ouc.clientId,\n        redirectUri: oauth2Client.getNoHashUrl()\n      });\n    },\n    end: function(opts, fn, errFn) {\n      opts = jq.extend({\n        code: false,\n        clientId: false,\n        clientSecret: false,\n        accessTokenUrl: false,\n        redirectUri: window.location.href,\n        userInfoUrl: false\n      }, opts);\n      if (!opts.code) {\n        return;\n      }\n      jq.ajax({\n        async: false,\n        url: opts.accessTokenUrl,\n        type: \"post\",\n        data: {\n          grant_type: \"authorization_code\",\n          client_id: opts.clientId,\n          client_secret: opts.clientSecret,\n          code: opts.code,\n          redirect_uri: opts.redirectUri\n        },\n        success: function(data) {\n          if (data) {\n            if (typeof data === 'string') {\n              data = jq.parseJSON(data);\n            }\n            var accessToken = data.access_token;\n            var expiresIn = data.expires_in;\n          }\n          fn(accessToken, expiresIn);\n        },\n        error: function(XMLHttpRequest, textStatus, errorThrown) {\n          errFn(XMLHttpRequest, textStatus, errorThrown);\n        },\n        complete: function(XMLHttpRequest, textStatus) {}\n      });\n\n    }\n\n  };\n\n  return oauth2Client;\n}"]},"metadata":{},"sourceType":"module"}