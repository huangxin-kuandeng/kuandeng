{"ast":null,"code":"/* eslint-disable prettier/prettier */\nimport _ from \"lodash\"; // 通用方法\n\nexport function formatTags(tags) {\n  var newtags = {};\n  tags.forEach(d => {\n    var k = d.k || d.key || d.name;\n    var v = d.v || d.val || d.value || \"\";\n    newtags[k] = v;\n  });\n  return newtags;\n}\n/*** \r\n *用户权限：\r\n *0：无权限\r\n *1：作业员\r\n *2：质检员\r\n *3：所有权限\r\n */\n\nexport function isRoleAuth(user) {\n  var authorities = user.authorities;\n  var workType = false;\n  var checkType = false;\n  var works = [\"edit\", \"work\", \"LinearWork\", \"diseaseWork\", \"autoTopologyWork\", \"totalFactorCompileWork\"];\n  var checks = [\"edit_check\", \"manualCheck\", \"check\", \"LinearCheck\", \"diseaseCheck\", \"autoTopologyCheck\", \"totalFactorCompileCheck\"];\n  authorities.forEach(d => {\n    var authority = d.authority;\n\n    if (works.includes(authority)) {\n      workType = true;\n    }\n\n    if (checks.includes(authority)) {\n      checkType = true;\n    }\n  });\n\n  if (workType && checkType) {\n    return 3;\n  } else if (workType && !checkType) {\n    return 1;\n  } else if (!workType && checkType) {\n    return 2;\n  }\n\n  return 0;\n}","map":{"version":3,"sources":["D:/project/batch-edit/src/services/util.js"],"names":["_","formatTags","tags","newtags","forEach","d","k","key","name","v","val","value","isRoleAuth","user","authorities","workType","checkType","works","checks","authority","includes"],"mappings":"AAAA;AACA,OAAOA,CAAP,MAAc,QAAd,C,CACA;;AACA,OAAO,SAASC,UAAT,CAAoBC,IAApB,EAA0B;AAC/B,MAAIC,OAAO,GAAG,EAAd;AACAD,EAAAA,IAAI,CAACE,OAAL,CAAaC,CAAC,IAAI;AAChB,QAAIC,CAAC,GAAGD,CAAC,CAACC,CAAF,IAAOD,CAAC,CAACE,GAAT,IAAgBF,CAAC,CAACG,IAA1B;AACA,QAAIC,CAAC,GAAGJ,CAAC,CAACI,CAAF,IAAOJ,CAAC,CAACK,GAAT,IAAgBL,CAAC,CAACM,KAAlB,IAA2B,EAAnC;AACAR,IAAAA,OAAO,CAACG,CAAD,CAAP,GAAaG,CAAb;AACD,GAJD;AAKA,SAAON,OAAP;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASS,UAAT,CAAoBC,IAApB,EAA0B;AAC/B,MAAIC,WAAW,GAAGD,IAAI,CAACC,WAAvB;AACA,MAAIC,QAAQ,GAAG,KAAf;AACA,MAAIC,SAAS,GAAG,KAAhB;AACA,MAAIC,KAAK,GAAG,CAAC,MAAD,EAAS,MAAT,EAAiB,YAAjB,EAA+B,aAA/B,EAA8C,kBAA9C,EAAkE,wBAAlE,CAAZ;AACA,MAAIC,MAAM,GAAG,CAAC,YAAD,EAAe,aAAf,EAA8B,OAA9B,EAAuC,aAAvC,EAAsD,cAAtD,EAAsE,mBAAtE,EAA2F,yBAA3F,CAAb;AAEAJ,EAAAA,WAAW,CAACV,OAAZ,CAAoBC,CAAC,IAAI;AACvB,QAAIc,SAAS,GAAGd,CAAC,CAACc,SAAlB;;AACA,QAAIF,KAAK,CAACG,QAAN,CAAeD,SAAf,CAAJ,EAA+B;AAC7BJ,MAAAA,QAAQ,GAAG,IAAX;AACD;;AACD,QAAIG,MAAM,CAACE,QAAP,CAAgBD,SAAhB,CAAJ,EAAgC;AAC9BH,MAAAA,SAAS,GAAG,IAAZ;AACD;AACF,GARD;;AASA,MAAID,QAAQ,IAAIC,SAAhB,EAA2B;AACzB,WAAO,CAAP;AACD,GAFD,MAEO,IAAID,QAAQ,IAAI,CAACC,SAAjB,EAA4B;AACjC,WAAO,CAAP;AACD,GAFM,MAEA,IAAI,CAACD,QAAD,IAAaC,SAAjB,EAA4B;AACjC,WAAO,CAAP;AACD;;AACD,SAAO,CAAP;AAED","sourcesContent":["/* eslint-disable prettier/prettier */\r\nimport _ from \"lodash\";\r\n// 通用方法\r\nexport function formatTags(tags) {\r\n  var newtags = {};\r\n  tags.forEach(d => {\r\n    var k = d.k || d.key || d.name;\r\n    var v = d.v || d.val || d.value || \"\";\r\n    newtags[k] = v;\r\n  })\r\n  return newtags;\r\n}\r\n/*** \r\n *用户权限：\r\n *0：无权限\r\n *1：作业员\r\n *2：质检员\r\n *3：所有权限\r\n */\r\nexport function isRoleAuth(user) {\r\n  var authorities = user.authorities;\r\n  var workType = false;\r\n  var checkType = false;\r\n  var works = [\"edit\", \"work\", \"LinearWork\", \"diseaseWork\", \"autoTopologyWork\", \"totalFactorCompileWork\"];\r\n  var checks = [\"edit_check\", \"manualCheck\", \"check\", \"LinearCheck\", \"diseaseCheck\", \"autoTopologyCheck\", \"totalFactorCompileCheck\"];\r\n\r\n  authorities.forEach(d => {\r\n    var authority = d.authority;\r\n    if (works.includes(authority)) {\r\n      workType = true;\r\n    }\r\n    if (checks.includes(authority)) {\r\n      checkType = true;\r\n    }\r\n  })\r\n  if (workType && checkType) {\r\n    return 3;\r\n  } else if (workType && !checkType) {\r\n    return 1;\r\n  } else if (!workType && checkType) {\r\n    return 2;\r\n  }\r\n  return 0;\r\n\r\n}"]},"metadata":{},"sourceType":"module"}