{"ast":null,"code":"import footHeader from \"@/components/contentComponents/footFormHeader.vue\";\nimport * as sysApi from \"../services/sys\";\nimport * as util from \"../services/util\";\nexport default {\n  name: \"indexFooter\",\n  props: {\n    msg: String\n  },\n\n  data() {\n    return {\n      table: false,\n      tableData: [{\n        id: 1,\n        date: \"2016-05-02\",\n        name: \"王小虎\",\n        address: \"上海市普陀区金沙江路 1518 弄\"\n      }, {\n        id: 2,\n        date: \"2016-05-04\",\n        name: \"王小虎\",\n        address: \"上海市普陀区金沙江路 1517 弄\"\n      }, {\n        id: 3,\n        date: \"2016-05-01\",\n        name: \"王小虎\",\n        address: \"上海市普陀区金沙江路 1519 弄\",\n        children: [{\n          id: 31,\n          date: \"2016-05-01\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1519 弄\"\n        }, {\n          id: 32,\n          date: \"2016-05-01\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1519 弄\"\n        }, {\n          id: 32,\n          date: \"2016-05-01\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1519 弄\"\n        }, {\n          id: 32,\n          date: \"2016-05-01\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1519 弄\"\n        }, {\n          id: 32,\n          date: \"2016-05-01\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1519 弄\"\n        }, {\n          id: 32,\n          date: \"2016-05-01\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1519 弄\"\n        }, {\n          id: 32,\n          date: \"2016-05-01\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1519 弄\"\n        }]\n      }, {\n        id: 4,\n        date: \"2016-05-03\",\n        name: \"王小虎\",\n        address: \"上海市普陀区金沙江路 1516 弄\"\n      }]\n    };\n  },\n\n  mounted() {\n    this.queryQualityTag();\n  },\n\n  methods: {\n    exports() {},\n\n    tableToggle(type) {\n      this.table = type;\n    },\n\n    queryQualityTag() {\n      var $this = this;\n      var temp1 = [{\n        k: \"TASK_ID\",\n        op: \"eq\",\n        v: \"400949091\"\n      }];\n      var $url = $this.$config.kd_tag + \"tag/osm/QUALITY_TAG/query?tagsJson=\" + encodeURIComponent(JSON.stringify(temp1));\n      sysApi.getAsyncDatas({\n        url: $url\n      }).then(res => {\n        debugger;\n        var nodes = res.result && res.result.node || [];\n        nodes.forEach(function (entity) {\n          let tags = util.formatTags(entity.tag);\n          let ERROR_TYPE = tags.ERROR_TYPE;\n          let FEATURE = tags.FEATURE;\n          let CHECK_ITEM_ID = tags.CHECK_ITEM_ID;\n\n          let type = _.filter(types, {\n            value: ERROR_TYPE\n          })[0];\n\n          let type_name = type && type.name ? type.name : \"\";\n          var obj = {\n            id: \"\",\n            state: \"xx\",\n            errortype: type_name,\n            checknum: \"\",\n            datatype: \"\",\n            question: \"\",\n            tagsource: \"\",\n            progress: \"\",\n            pid: -1\n          }; //数据分类\n\n          if (ERROR_TYPE == \"0\") {\n            if (!newDatas[CHECK_ITEM_ID + \"-\" + FEATURE]) {\n              newDatas[CHECK_ITEM_ID + \"-\" + FEATURE] = obj;\n              newDatas[CHECK_ITEM_ID + \"-\" + FEATURE].datatype = FEATURE;\n              newDatas[CHECK_ITEM_ID + \"-\" + FEATURE].datas = [];\n            }\n\n            newDatas[CHECK_ITEM_ID + \"-\" + FEATURE].datas.push(entity);\n          } else {\n            // if (ERROR_TYPE && FEATURE) {\n            if (!newDatas[ERROR_TYPE + \"-\" + FEATURE]) {\n              newDatas[ERROR_TYPE + \"-\" + FEATURE] = obj;\n              newDatas[ERROR_TYPE + \"-\" + FEATURE].datatype = FEATURE;\n              newDatas[ERROR_TYPE + \"-\" + FEATURE].datas = [];\n            }\n\n            newDatas[ERROR_TYPE + \"-\" + FEATURE].datas.push(entity);\n          }\n        });\n      });\n    }\n\n  },\n  components: {\n    footHeader\n  }\n};","map":{"version":3,"sources":["D:\\project\\batch-edit\\src\\components\\footerForm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"indexFooter\">\n    <footHeader @tableToggle=\"tableToggle\" :hideHeader=\"true\" />\n    <el-drawer\n      title=\"\"\n      v-model=\"table\"\n      direction=\"btt\"\n      size=\"500\"\n      :with-header=\"false\"\n    >\n      <footHeader @tableToggle=\"tableToggle\" :hideHeader=\"false\" />\n      <el-button\n        class=\"export\"\n        type=\"default\"\n        icon=\"el-icon-upload2\"\n        title=\"导出\"\n        @click=\"exports()\"\n        >导出</el-button\n      >\n      <el-table\n        :data=\"tableData\"\n        style=\"width: 100%; margin-bottom: 20px\"\n        row-key=\"id\"\n        border\n        empty-text=\" - \"\n        max-height=\"400\"\n        :tree-props=\"{ children: 'children', hasChildren: 'hasChildren' }\"\n      >\n        <el-table-column fixed=\"left\" label=\"状态\" width=\"120\" type=\"\">\n          <el-button\n            icon=\"el-icon-check\"\n            type=\"success\"\n            size=\"mini\"\n            title=\"\"\n            circle\n          ></el-button>\n          <el-button\n            icon=\"el-icon-close\"\n            size=\"mini\"\n            title=\"\"\n            circle\n          ></el-button>\n          <el-button\n            icon=\"el-icon-right\"\n            size=\"mini\"\n            title=\"\"\n            circle\n          ></el-button>\n        </el-table-column>\n        <el-table-column\n          prop=\"date\"\n          label=\"错误类别\"\n          width=\"180\"\n          type=\"\"\n        ></el-table-column>\n        <el-table-column\n          prop=\"name\"\n          label=\"检查项编码\"\n          width=\"180\"\n          type=\"\"\n        ></el-table-column>\n        <el-table-column\n          prop=\"address\"\n          label=\"数据类型\"\n          type=\"\"\n        ></el-table-column>\n        <el-table-column\n          prop=\"address\"\n          label=\"问题描述\"\n          type=\"\"\n        ></el-table-column>\n        <el-table-column\n          prop=\"address\"\n          label=\"标记类型\"\n          type=\"\"\n        ></el-table-column>\n        <el-table-column\n          prop=\"address\"\n          label=\"核标进度\"\n          type=\"\"\n        ></el-table-column>\n        <el-table-column label=\"操作\" width=\"100\"></el-table-column>\n      </el-table>\n    </el-drawer>\n  </div>\n</template>\n\n<script>\nimport footHeader from \"@/components/contentComponents/footFormHeader.vue\";\nimport * as sysApi from \"../services/sys\";\nimport * as util from \"../services/util\";\nexport default {\n  name: \"indexFooter\",\n  props: {\n    msg: String,\n  },\n  data() {\n    return {\n      table: false,\n      tableData: [\n        {\n          id: 1,\n          date: \"2016-05-02\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1518 弄\",\n        },\n        {\n          id: 2,\n          date: \"2016-05-04\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1517 弄\",\n        },\n        {\n          id: 3,\n          date: \"2016-05-01\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1519 弄\",\n          children: [\n            {\n              id: 31,\n              date: \"2016-05-01\",\n              name: \"王小虎\",\n              address: \"上海市普陀区金沙江路 1519 弄\",\n            },\n            {\n              id: 32,\n              date: \"2016-05-01\",\n              name: \"王小虎\",\n              address: \"上海市普陀区金沙江路 1519 弄\",\n            },\n            {\n              id: 32,\n              date: \"2016-05-01\",\n              name: \"王小虎\",\n              address: \"上海市普陀区金沙江路 1519 弄\",\n            },\n            {\n              id: 32,\n              date: \"2016-05-01\",\n              name: \"王小虎\",\n              address: \"上海市普陀区金沙江路 1519 弄\",\n            },\n            {\n              id: 32,\n              date: \"2016-05-01\",\n              name: \"王小虎\",\n              address: \"上海市普陀区金沙江路 1519 弄\",\n            },\n            {\n              id: 32,\n              date: \"2016-05-01\",\n              name: \"王小虎\",\n              address: \"上海市普陀区金沙江路 1519 弄\",\n            },\n            {\n              id: 32,\n              date: \"2016-05-01\",\n              name: \"王小虎\",\n              address: \"上海市普陀区金沙江路 1519 弄\",\n            },\n          ],\n        },\n        {\n          id: 4,\n          date: \"2016-05-03\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1516 弄\",\n        },\n      ],\n    };\n  },\n  mounted() {\n    this.queryQualityTag();\n  },\n  methods: {\n    exports() {},\n    tableToggle(type) {\n      this.table = type;\n    },\n    queryQualityTag() {\n      var $this = this;\n      var temp1 = [{ k: \"TASK_ID\", op: \"eq\", v: \"400949091\" }];\n      var $url =\n        $this.$config.kd_tag +\n        \"tag/osm/QUALITY_TAG/query?tagsJson=\" +\n        encodeURIComponent(JSON.stringify(temp1));\n\n      sysApi\n        .getAsyncDatas({\n          url: $url,\n        })\n        .then((res) => {\n          debugger;\n          var nodes = (res.result && res.result.node) || [];\n          nodes.forEach(function (entity) {\n            let tags = util.formatTags(entity.tag);\n            let ERROR_TYPE = tags.ERROR_TYPE;\n            let FEATURE = tags.FEATURE;\n            let CHECK_ITEM_ID = tags.CHECK_ITEM_ID;\n            let type = _.filter(types, { value: ERROR_TYPE })[0];\n            let type_name = type && type.name ? type.name : \"\";\n            var obj = {\n              id: \"\",\n              state: \"xx\",\n              errortype: type_name,\n              checknum: \"\",\n              datatype: \"\",\n              question: \"\",\n              tagsource: \"\",\n              progress: \"\",\n              pid: -1,\n            };\n            //数据分类\n            if (ERROR_TYPE == \"0\") {\n              if (!newDatas[CHECK_ITEM_ID + \"-\" + FEATURE]) {\n                newDatas[CHECK_ITEM_ID + \"-\" + FEATURE] = obj;\n                newDatas[CHECK_ITEM_ID + \"-\" + FEATURE].datatype = FEATURE;\n                newDatas[CHECK_ITEM_ID + \"-\" + FEATURE].datas = [];\n              }\n              newDatas[CHECK_ITEM_ID + \"-\" + FEATURE].datas.push(entity);\n            } else {\n              // if (ERROR_TYPE && FEATURE) {\n              if (!newDatas[ERROR_TYPE + \"-\" + FEATURE]) {\n                newDatas[ERROR_TYPE + \"-\" + FEATURE] = obj;\n                newDatas[ERROR_TYPE + \"-\" + FEATURE].datatype = FEATURE;\n                newDatas[ERROR_TYPE + \"-\" + FEATURE].datas = [];\n              }\n              newDatas[ERROR_TYPE + \"-\" + FEATURE].datas.push(entity);\n            }\n          });\n        });\n    },\n  },\n  components: {\n    footHeader,\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\">\n.indexFooter {\n  float: left;\n  position: absolute;\n  bottom: 0px;\n  z-index: 100;\n  height: 20px;\n  width: calc(100% - 10px);\n  padding: 0px 5px;\n}\n.indexFooter .el-table .el-button {\n  padding: 2px;\n  min-height: 10px;\n}\n.indexFooter button.export {\n  position: absolute;\n  right: 15px;\n  top: 10px;\n}\n.indexFooter .el-drawer {\n  overflow: initial;\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}