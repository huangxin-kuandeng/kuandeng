{"ast":null,"code":"/* eslint-disable prettier/prettier */\nimport { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport store from \"./store\";\nimport _ from \"lodash\";\nimport ElementUI from \"element-plus\";\nimport \"element-plus/lib/theme-chalk/index.css\";\nimport \"../config.js\";\nimport * as sysApi from \"./services/sys\";\nimport axios from \"axios\";\nlet app = createApp(App);\napp.config.globalProperties.$_ = _;\napp.config.globalProperties.$axios = axios;\napp.config.globalProperties.$fruit = {};\napp.config.globalProperties.$tags = {};\napp.use(store);\napp.use(router);\napp.use(ElementUI);\nsysApi.configList({}).then(res => {\n  app.config.globalProperties.$config = res && res.url ? res.url : {};\n\n  if (res.url) {\n    sysApi.configFruit({\n      url: res.url.kds_meta + \"meta/app/instance/current/FRUIT.json\"\n    }).then(res => {\n      var layers = res.result && res.result.layers || [];\n      layers.forEach(d => {\n        var modelName = d.model.modelName;\n        var fields = d.model.fields;\n        var parentOptions = {};\n        var selectGroup = {};\n\n        for (var s = 0; s < fields.length; s++) {\n          var display = fields[s].display; //false -- 不显示；true -- 显示\n\n          var fieldInput = fields[s].fieldInput;\n          var fieldName = fields[s].fieldName;\n          var s_id = fields[s].id;\n\n          if (display && fieldInput == \"select\") {\n            var fieldTypeValues = fields[s].fieldType.fieldTypeValues || [];\n            var firstChild = fieldTypeValues[0] || {};\n            var parentId = firstChild.parentId ? true : false;\n\n            var cloneValues = _.cloneDeep(fieldTypeValues);\n\n            fields[s][\"parentId\"] = parentId;\n\n            if (parentId) {\n              cloneValues = [];\n            }\n\n            fields[s][\"cloneValues\"] = cloneValues; //遍历每个属性项中所有满足parentId不为空的进行创建对象数组并赋值\n\n            fieldTypeValues.forEach(function (c) {\n              parentOptions[c.id] = s_id;\n\n              if (s.parentId && !selectGroup[c.parentId]) {\n                var cid = parentOptions[c.parentId];\n                selectGroup[c.parentId] = {\n                  cid: cid,\n                  fieldName: fieldName,\n                  options: []\n                };\n              }\n\n              if (selectGroup[c.parentId]) {\n                selectGroup[c.parentId].options.push({\n                  \"name\": c.name,\n                  \"value\": c.value\n                });\n              }\n            });\n            d.model.selectGroup = selectGroup;\n          }\n        }\n\n        app.config.globalProperties.$fruit[modelName] = d.model;\n      });\n    });\n    sysApi.configTags({\n      url: res.url.kds_meta + \"meta/app/instance/current/QUALITY_TAG.json\"\n    }).then(res => {\n      var layers = res.result && res.result.layers || [];\n      layers.forEach(d => {\n        var modelName = d.model.modelName;\n        app.config.globalProperties.$tags[modelName] = d.model;\n      });\n    });\n  }\n\n  app.mount(\"#app\");\n});","map":{"version":3,"sources":["D:/project/batch-edit/src/main.js"],"names":["createApp","App","router","store","_","ElementUI","sysApi","axios","app","config","globalProperties","$_","$axios","$fruit","$tags","use","configList","then","res","$config","url","configFruit","kds_meta","layers","result","forEach","d","modelName","model","fields","parentOptions","selectGroup","s","length","display","fieldInput","fieldName","s_id","id","fieldTypeValues","fieldType","firstChild","parentId","cloneValues","cloneDeep","c","cid","options","push","name","value","configTags","mount"],"mappings":"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","sourcesContent":["/* eslint-disable prettier/prettier */\nimport { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport store from \"./store\";\nimport _ from \"lodash\";\nimport ElementUI from \"element-plus\";\nimport \"element-plus/lib/theme-chalk/index.css\";\nimport \"../config.js\";\n\nimport * as sysApi from \"./services/sys\";\n\nimport axios from \"axios\";\n\nlet app = createApp(App);\napp.config.globalProperties.$_ = _;\napp.config.globalProperties.$axios = axios;\napp.config.globalProperties.$fruit = {};\napp.config.globalProperties.$tags = {};\napp.use(store);\napp.use(router);\napp.use(ElementUI);\n\nsysApi.configList({}).then((res) => {\n  app.config.globalProperties.$config = res && res.url ? res.url : {};\n  if (res.url) {\n    sysApi\n      .configFruit({\n        url: res.url.kds_meta + \"meta/app/instance/current/FRUIT.json\",\n      })\n      .then((res) => {\n        var layers = (res.result && res.result.layers) || [];\n        layers.forEach((d) => {\n          var modelName = d.model.modelName;\n          var fields = d.model.fields;\n          var parentOptions = {};\n          var selectGroup = {};\n          for (var s = 0; s < fields.length; s++) {\n            var display = fields[s].display; //false -- 不显示；true -- 显示\n            var fieldInput = fields[s].fieldInput;\n            var fieldName = fields[s].fieldName;\n            var s_id = fields[s].id;\n            if (display && fieldInput == \"select\") {\n              var fieldTypeValues = fields[s].fieldType.fieldTypeValues || [];\n              var firstChild = fieldTypeValues[0] || {};\n              var parentId = firstChild.parentId ? true : false;\n              var cloneValues = _.cloneDeep(fieldTypeValues);\n              fields[s][\"parentId\"] = parentId;\n              if (parentId) {\n                cloneValues = [];\n              }\n              fields[s][\"cloneValues\"] = cloneValues;\n\n              //遍历每个属性项中所有满足parentId不为空的进行创建对象数组并赋值\n              fieldTypeValues.forEach(function(c) {\n                parentOptions[c.id] = s_id;\n                if (s.parentId && !selectGroup[c.parentId]) {\n                  var cid = parentOptions[c.parentId];\n                  selectGroup[c.parentId] = {\n                    cid: cid,\n                    fieldName: fieldName,\n                    options: []\n                  };\n                }\n                if (selectGroup[c.parentId]) {\n                  selectGroup[c.parentId].options.push({\n                    \"name\": c.name,\n                    \"value\": c.value\n                  });\n                }\n              });\n              d.model.selectGroup = selectGroup;\n\n            }\n          }\n          app.config.globalProperties.$fruit[modelName] = d.model;\n        });\n      });\n    sysApi\n      .configTags({\n        url: res.url.kds_meta + \"meta/app/instance/current/QUALITY_TAG.json\",\n      })\n      .then((res) => {\n        var layers = (res.result && res.result.layers) || [];\n        layers.forEach((d) => {\n          var modelName = d.model.modelName;\n          app.config.globalProperties.$tags[modelName] = d.model;\n        });\n      });\n  }\n  app.mount(\"#app\");\n});"]},"metadata":{},"sourceType":"module"}