{"ast":null,"code":"/* eslint-disable prettier/prettier */\nimport { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport store from \"./store\";\nimport _ from \"lodash\";\nimport ElementUI from \"element-plus\";\nimport \"element-plus/lib/theme-chalk/index.css\";\nimport \"../config.js\";\nimport locale from 'element-plus/lib/locale/lang/zh-cn';\nimport * as sysApi from \"./services/sys\";\nimport * as userApi from \"./services/jquery.oauth2-client.js\";\nimport axios from \"axios\";\nlet app = createApp(App);\napp.config.globalProperties.$_ = _;\napp.config.globalProperties.$axios = axios;\napp.config.globalProperties.$fruit = {};\napp.config.globalProperties.$tags = {};\napp.use(store);\napp.use(router);\napp.use(ElementUI, {\n  locale\n});\nsysApi.configList({}).then(res => {\n  app.config.globalProperties.$config = res && res.url ? res.url : {};\n\n  if (res.url) {\n    var oauth = userApi.oauth2Client(app, res.url.kd_auth_server + \"oauth\");\n    oauth.user(res.url.kd_auth_server + \"user\");\n    sysApi.configFruit({\n      url: res.url.kds_meta + \"meta/app/instance/current/FRUIT.json\"\n    }).then(res => {\n      var layers = res.result && res.result.layers || [];\n      layers.forEach(d => {\n        var modelName = d.model.modelName;\n        var fields = d.model.fields;\n        var parentOptions = {};\n        var fieldsGroup = {};\n\n        for (var s = 0; s < fields.length; s++) {\n          var display = fields[s].display; //false -- 不显示；true -- 显示\n\n          var fieldInput = fields[s].fieldInput;\n          var fieldName = fields[s].fieldName;\n          var s_id = fields[s].id;\n          fieldsGroup[s_id] = s;\n\n          if (display && fieldInput == \"select\") {\n            var fieldTypeValues = fields[s].fieldType.fieldTypeValues || [];\n\n            var cloneValues = _.cloneDeep(fieldTypeValues);\n\n            fields[s].cloneValues = cloneValues; //遍历每个属性项中所有满足parentId不为空的进行创建对象数组并赋值\n\n            for (var i = 0; i < fieldTypeValues.length; i++) {\n              var c = fieldTypeValues[i];\n              parentOptions[c.id] = s_id;\n              var cid = c.parentId ? parentOptions[c.parentId] : null;\n\n              if (cid) {\n                var index = fieldsGroup[cid];\n\n                if (!fields[index].selectGroup) {\n                  fields[index].selectGroup = [fieldName];\n                } else {\n                  fields[index].selectGroup.push(fieldName);\n                }\n\n                break;\n              }\n            }\n          }\n        }\n\n        app.config.globalProperties.$fruit[modelName] = d.model;\n      });\n    });\n    sysApi.configTags({\n      url: res.url.kds_meta + \"meta/app/instance/current/QUALITY_TAG.json\"\n    }).then(res => {\n      var layers = res.result && res.result.layers || [];\n      layers.forEach(d => {\n        var fields = d.model.fields;\n        var modelName = d.model.modelName;\n\n        for (var s = 0; s < fields.length; s++) {\n          var fieldInput = fields[s].fieldInput;\n\n          if (fieldInput == \"select\") {\n            var fieldTypeValues = fields[s].fieldType.fieldTypeValues || [];\n\n            var cloneValues = _.cloneDeep(fieldTypeValues);\n\n            fields[s].cloneValues = cloneValues;\n          }\n        }\n\n        app.config.globalProperties.$tags[modelName] = d.model;\n      });\n    });\n  }\n\n  app.mount(\"#app\");\n});","map":{"version":3,"sources":["D:/web_editor_hd/src/main/webapp/batch-edit/src/main.js"],"names":["createApp","App","router","store","_","ElementUI","locale","sysApi","userApi","axios","app","config","globalProperties","$_","$axios","$fruit","$tags","use","configList","then","res","$config","url","oauth","oauth2Client","kd_auth_server","user","configFruit","kds_meta","layers","result","forEach","d","modelName","model","fields","parentOptions","fieldsGroup","s","length","display","fieldInput","fieldName","s_id","id","fieldTypeValues","fieldType","cloneValues","cloneDeep","i","c","cid","parentId","index","selectGroup","push","configTags","mount"],"mappings":"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","sourcesContent":["/* eslint-disable prettier/prettier */\r\nimport { createApp } from \"vue\";\r\nimport App from \"./App.vue\";\r\nimport router from \"./router\";\r\nimport store from \"./store\";\r\nimport _ from \"lodash\";\r\nimport ElementUI from \"element-plus\";\r\nimport \"element-plus/lib/theme-chalk/index.css\";\r\nimport \"../config.js\";\r\nimport locale from 'element-plus/lib/locale/lang/zh-cn';\r\nimport * as sysApi from \"./services/sys\";\r\nimport * as userApi from \"./services/jquery.oauth2-client.js\";\r\n\r\nimport axios from \"axios\";\r\n\r\nlet app = createApp(App);\r\napp.config.globalProperties.$_ = _;\r\napp.config.globalProperties.$axios = axios;\r\napp.config.globalProperties.$fruit = {};\r\napp.config.globalProperties.$tags = {};\r\napp.use(store);\r\napp.use(router);\r\napp.use(ElementUI, { locale });\r\nsysApi.configList({}).then((res) => {\r\n  app.config.globalProperties.$config = res && res.url ? res.url : {};\r\n  if (res.url) {\r\n    var oauth = userApi.oauth2Client(app, res.url.kd_auth_server + \"oauth\");\r\n    oauth.user(res.url.kd_auth_server + \"user\");\r\n    sysApi\r\n      .configFruit({\r\n        url: res.url.kds_meta + \"meta/app/instance/current/FRUIT.json\",\r\n      })\r\n      .then((res) => {\r\n        var layers = (res.result && res.result.layers) || [];\r\n        layers.forEach((d) => {\r\n          var modelName = d.model.modelName;\r\n          var fields = d.model.fields;\r\n          var parentOptions = {};\r\n          var fieldsGroup = {};\r\n          for (var s = 0; s < fields.length; s++) {\r\n            var display = fields[s].display; //false -- 不显示；true -- 显示\r\n            var fieldInput = fields[s].fieldInput;\r\n            var fieldName = fields[s].fieldName;\r\n            var s_id = fields[s].id;\r\n            fieldsGroup[s_id] = s;\r\n            if (display && fieldInput == \"select\") {\r\n              var fieldTypeValues = fields[s].fieldType.fieldTypeValues || [];\r\n              var cloneValues = _.cloneDeep(fieldTypeValues);\r\n              fields[s].cloneValues = cloneValues;\r\n              //遍历每个属性项中所有满足parentId不为空的进行创建对象数组并赋值\r\n              for (var i = 0; i < fieldTypeValues.length; i++) {\r\n                var c = fieldTypeValues[i];\r\n                parentOptions[c.id] = s_id;\r\n                var cid = c.parentId ? parentOptions[c.parentId] : null;\r\n                if (cid) {\r\n                  var index = fieldsGroup[cid];\r\n                  if (!fields[index].selectGroup) {\r\n                    fields[index].selectGroup = [fieldName];\r\n                  } else {\r\n                    fields[index].selectGroup.push(fieldName);\r\n                  }\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          app.config.globalProperties.$fruit[modelName] = d.model;\r\n        });\r\n      });\r\n    sysApi\r\n      .configTags({\r\n        url: res.url.kds_meta + \"meta/app/instance/current/QUALITY_TAG.json\",\r\n      })\r\n      .then((res) => {\r\n        var layers = (res.result && res.result.layers) || [];\r\n        layers.forEach((d) => {\r\n          var fields = d.model.fields;\r\n          var modelName = d.model.modelName;\r\n          for (var s = 0; s < fields.length; s++) {\r\n            var fieldInput = fields[s].fieldInput;\r\n            if (fieldInput == \"select\") {\r\n              var fieldTypeValues = fields[s].fieldType.fieldTypeValues || [];\r\n              var cloneValues = _.cloneDeep(fieldTypeValues);\r\n              fields[s].cloneValues = cloneValues;\r\n            }\r\n          }\r\n          app.config.globalProperties.$tags[modelName] = d.model;\r\n        });\r\n      });\r\n  }\r\n  app.mount(\"#app\");\r\n});"]},"metadata":{},"sourceType":"module"}