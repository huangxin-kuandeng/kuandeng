{"ast":null,"code":"// @ is an alias to /src\nimport indexHeader from \"@/components/header.vue\";\nimport indexSearch from \"@/components/search.vue\";\nimport indexContent from \"@/components/content.vue\";\nimport indexFooter from \"@/components/footerForm.vue\";\nexport default {\n  name: \"Home\",\n\n  data() {\n    return {\n      tagDatas: [],\n      tagEdits: {}\n    };\n  },\n\n  components: {\n    indexHeader,\n    indexSearch,\n    indexContent,\n    indexFooter\n  },\n  methods: {\n    contentPageChange(row) {\n      this.$refs.content.contentPageChange(row);\n    },\n\n    refresh(id = \"\", featureGroupId = \"\") {\n      this.tagDatas = [];\n      this.$refs.content.refresh({\n        page: 1,\n        id: id,\n        featureGroupId: featureGroupId\n      });\n      this.$refs.footer.queryQualityTag(id);\n    },\n\n    refreshForm(id) {\n      this.tagDatas = [];\n      this.$refs.footer.queryQualityTag(id);\n    },\n\n    // 质检标记报表数据变化时，更新所有标信息\n    tagDataChange(data) {\n      this.tagDatas = data;\n    },\n\n    // 质检标记报表单数据修改状态时，更新数据内的状态\n    tagDataUpdateState(id, properties, type) {\n      var updateData = this.tagDatas.find(d => {\n        return d.id == id;\n      });\n\n      if (updateData) {\n        var updateTag = updateData.tag || [];\n\n        for (var prop in properties) {\n          var updateTagProp = updateTag.find(s => {\n            return s.k == prop;\n          });\n\n          if (updateTagProp) {\n            updateTagProp.v = properties[prop];\n            updateData.cloneTag[prop] = properties[prop];\n          } else {\n            updateData.tag.push({\n              k: prop,\n              v: properties[prop]\n            });\n            updateData.cloneTag[prop] = properties[prop];\n          }\n        }\n\n        !type && this.$refs.content.changeTagEditorForm(updateData.id, properties);\n      }\n    },\n\n    finishTask(type) {\n      this.tagDatas = [];\n\n      if (type == \"report\") {\n        this.$refs.footer.finishDatas();\n      } else if (type == \"task\") {\n        this.$refs.search.findTasks();\n      }\n    },\n\n    // 质检标属性编辑：点击确定或分页时执行\n    checkTagEdit(id, form, editId, modelName) {\n      // this.tagEdits[id] = form;\n      this.$refs.footer.updateTagDatas(id, form, editId, modelName);\n      this.tagDataUpdateState(id, form, true);\n    },\n\n    checkTagCreate(id, form, editId, modelName) {\n      this.$refs.footer.updateTagDatas(id, form, editId, modelName);\n      var properties = this.$_.cloneDeep(form);\n      properties.FEATURE_ID = editId;\n      properties.FEATURE = modelName;\n      this.tagDatas.push({\n        id: id,\n        cloneTag: properties,\n        tag: [],\n        modelName: \"QUALITY_TAG\"\n      }); // this.tagDataUpdateState(id, form, true);\n    },\n\n    drawerOpened() {\n      this.$refs.content.contentClass({\n        contentClass: \"little\"\n      });\n    },\n\n    drawerClose() {\n      this.$refs.content.contentClass({\n        contentClass: \"\"\n      });\n    }\n\n  }\n};","map":{"version":3,"sources":["D:\\web_editor_hd\\src\\main\\webapp\\batch-edit\\src\\views\\Home.vue"],"names":[],"mappings":"AAyBA;AACA,OAAO,WAAP,MAAwB,yBAAxB;AACA,OAAO,WAAP,MAAwB,yBAAxB;AACA,OAAO,YAAP,MAAyB,0BAAzB;AACA,OAAO,WAAP,MAAwB,6BAAxB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,MADO;;AAEb,EAAA,IAAI,GAAG;AACL,WAAO;AACL,MAAA,QAAQ,EAAE,EADL;AAEL,MAAA,QAAQ,EAAE;AAFL,KAAP;AAID,GAPY;;AAQb,EAAA,UAAU,EAAE;AACV,IAAA,WADU;AAEV,IAAA,WAFU;AAGV,IAAA,YAHU;AAIV,IAAA;AAJU,GARC;AAcb,EAAA,OAAO,EAAE;AACP,IAAA,iBAAiB,CAAC,GAAD,EAAM;AACrB,WAAK,KAAL,CAAW,OAAX,CAAmB,iBAAnB,CAAqC,GAArC;AACD,KAHM;;AAIP,IAAA,OAAO,CAAC,EAAC,GAAI,EAAN,EAAU,cAAa,GAAI,EAA3B,EAA+B;AACpC,WAAK,QAAL,GAAgB,EAAhB;AACA,WAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,CAA2B;AACzB,QAAA,IAAI,EAAE,CADmB;AAEzB,QAAA,EAAE,EAAE,EAFqB;AAGzB,QAAA,cAAc,EAAE;AAHS,OAA3B;AAKA,WAAK,KAAL,CAAW,MAAX,CAAkB,eAAlB,CAAkC,EAAlC;AACD,KAZM;;AAaP,IAAA,WAAW,CAAC,EAAD,EAAK;AACd,WAAK,QAAL,GAAgB,EAAhB;AACA,WAAK,KAAL,CAAW,MAAX,CAAkB,eAAlB,CAAkC,EAAlC;AACD,KAhBM;;AAiBP;AACA,IAAA,aAAa,CAAC,IAAD,EAAO;AAClB,WAAK,QAAL,GAAgB,IAAhB;AACD,KApBM;;AAqBP;AACA,IAAA,kBAAkB,CAAC,EAAD,EAAK,UAAL,EAAiB,IAAjB,EAAuB;AACvC,UAAI,UAAS,GAAI,KAAK,QAAL,CAAc,IAAd,CAAoB,CAAD,IAAO;AACzC,eAAO,CAAC,CAAC,EAAF,IAAQ,EAAf;AACD,OAFgB,CAAjB;;AAGA,UAAI,UAAJ,EAAgB;AACd,YAAI,SAAQ,GAAI,UAAU,CAAC,GAAX,IAAkB,EAAlC;;AACA,aAAK,IAAI,IAAT,IAAiB,UAAjB,EAA6B;AAC3B,cAAI,aAAY,GAAI,SAAS,CAAC,IAAV,CAAgB,CAAD,IAAO;AACxC,mBAAO,CAAC,CAAC,CAAF,IAAO,IAAd;AACD,WAFmB,CAApB;;AAGA,cAAI,aAAJ,EAAmB;AACjB,YAAA,aAAa,CAAC,CAAd,GAAkB,UAAU,CAAC,IAAD,CAA5B;AACA,YAAA,UAAU,CAAC,QAAX,CAAoB,IAApB,IAA4B,UAAU,CAAC,IAAD,CAAtC;AACF,WAHA,MAGO;AACL,YAAA,UAAU,CAAC,GAAX,CAAe,IAAf,CAAoB;AAClB,cAAA,CAAC,EAAE,IADe;AAElB,cAAA,CAAC,EAAE,UAAU,CAAC,IAAD;AAFK,aAApB;AAIA,YAAA,UAAU,CAAC,QAAX,CAAoB,IAApB,IAA4B,UAAU,CAAC,IAAD,CAAtC;AACF;AACF;;AACA,SAAC,IAAD,IACE,KAAK,KAAL,CAAW,OAAX,CAAmB,mBAAnB,CAAuC,UAAU,CAAC,EAAlD,EAAsD,UAAtD,CADF;AAEF;AACD,KA9CM;;AA+CP,IAAA,UAAU,CAAC,IAAD,EAAO;AACf,WAAK,QAAL,GAAgB,EAAhB;;AACA,UAAI,IAAG,IAAK,QAAZ,EAAsB;AACpB,aAAK,KAAL,CAAW,MAAX,CAAkB,WAAlB;AACF,OAFA,MAEO,IAAI,IAAG,IAAK,MAAZ,EAAoB;AACzB,aAAK,KAAL,CAAW,MAAX,CAAkB,SAAlB;AACF;AACD,KAtDM;;AAuDP;AACA,IAAA,YAAY,CAAC,EAAD,EAAK,IAAL,EAAW,MAAX,EAAmB,SAAnB,EAA8B;AACxC;AACA,WAAK,KAAL,CAAW,MAAX,CAAkB,cAAlB,CAAiC,EAAjC,EAAqC,IAArC,EAA2C,MAA3C,EAAmD,SAAnD;AACA,WAAK,kBAAL,CAAwB,EAAxB,EAA4B,IAA5B,EAAkC,IAAlC;AACD,KA5DM;;AA6DP,IAAA,cAAc,CAAC,EAAD,EAAK,IAAL,EAAW,MAAX,EAAmB,SAAnB,EAA8B;AAC1C,WAAK,KAAL,CAAW,MAAX,CAAkB,cAAlB,CAAiC,EAAjC,EAAqC,IAArC,EAA2C,MAA3C,EAAmD,SAAnD;AACA,UAAI,UAAS,GAAI,KAAK,EAAL,CAAQ,SAAR,CAAkB,IAAlB,CAAjB;AACA,MAAA,UAAU,CAAC,UAAX,GAAwB,MAAxB;AACA,MAAA,UAAU,CAAC,OAAX,GAAqB,SAArB;AACA,WAAK,QAAL,CAAc,IAAd,CAAmB;AACjB,QAAA,EAAE,EAAE,EADa;AAEjB,QAAA,QAAQ,EAAE,UAFO;AAGjB,QAAA,GAAG,EAAE,EAHY;AAIjB,QAAA,SAAS,EAAE;AAJM,OAAnB,EAL0C,CAW1C;AACD,KAzEM;;AA0EP,IAAA,YAAY,GAAG;AACb,WAAK,KAAL,CAAW,OAAX,CAAmB,YAAnB,CAAgC;AAC9B,QAAA,YAAY,EAAE;AADgB,OAAhC;AAGD,KA9EM;;AA+EP,IAAA,WAAW,GAAG;AACZ,WAAK,KAAL,CAAW,OAAX,CAAmB,YAAnB,CAAgC;AAC9B,QAAA,YAAY,EAAE;AADgB,OAAhC;AAGD;;AAnFM;AAdI,CAAf","sourcesContent":["<template>\n  <div class=\"home\">\n    <indexHeader msg=\"属性批量编辑\" ref=\"header\" />\n    <indexSearch @refresh=\"refresh\" ref=\"search\" />\n    <indexContent\n      :tagDatas=\"tagDatas\"\n      @checkTagEdit=\"checkTagEdit\"\n      @checkTagCreate=\"checkTagCreate\"\n      @refreshForm=\"refreshForm\"\n      @finishTask=\"finishTask\"\n      ref=\"content\"\n    />\n    <indexFooter\n      ref=\"footer\"\n      :tagEdits=\"tagEdits\"\n      @tagDataUpdateState=\"tagDataUpdateState\"\n      @tagDataChange=\"tagDataChange\"\n      @drawerOpened=\"drawerOpened\"\n      @drawerClose=\"drawerClose\"\n      @contentPageChange=\"contentPageChange\"\n    />\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport indexHeader from \"@/components/header.vue\";\nimport indexSearch from \"@/components/search.vue\";\nimport indexContent from \"@/components/content.vue\";\nimport indexFooter from \"@/components/footerForm.vue\";\n\nexport default {\n  name: \"Home\",\n  data() {\n    return {\n      tagDatas: [],\n      tagEdits: {},\n    };\n  },\n  components: {\n    indexHeader,\n    indexSearch,\n    indexContent,\n    indexFooter,\n  },\n  methods: {\n    contentPageChange(row) {\n      this.$refs.content.contentPageChange(row);\n    },\n    refresh(id = \"\", featureGroupId = \"\") {\n      this.tagDatas = [];\n      this.$refs.content.refresh({\n        page: 1,\n        id: id,\n        featureGroupId: featureGroupId,\n      });\n      this.$refs.footer.queryQualityTag(id);\n    },\n    refreshForm(id) {\n      this.tagDatas = [];\n      this.$refs.footer.queryQualityTag(id);\n    },\n    // 质检标记报表数据变化时，更新所有标信息\n    tagDataChange(data) {\n      this.tagDatas = data;\n    },\n    // 质检标记报表单数据修改状态时，更新数据内的状态\n    tagDataUpdateState(id, properties, type) {\n      var updateData = this.tagDatas.find((d) => {\n        return d.id == id;\n      });\n      if (updateData) {\n        var updateTag = updateData.tag || [];\n        for (var prop in properties) {\n          var updateTagProp = updateTag.find((s) => {\n            return s.k == prop;\n          });\n          if (updateTagProp) {\n            updateTagProp.v = properties[prop];\n            updateData.cloneTag[prop] = properties[prop];\n          } else {\n            updateData.tag.push({\n              k: prop,\n              v: properties[prop],\n            });\n            updateData.cloneTag[prop] = properties[prop];\n          }\n        }\n        !type &&\n          this.$refs.content.changeTagEditorForm(updateData.id, properties);\n      }\n    },\n    finishTask(type) {\n      this.tagDatas = [];\n      if (type == \"report\") {\n        this.$refs.footer.finishDatas();\n      } else if (type == \"task\") {\n        this.$refs.search.findTasks();\n      }\n    },\n    // 质检标属性编辑：点击确定或分页时执行\n    checkTagEdit(id, form, editId, modelName) {\n      // this.tagEdits[id] = form;\n      this.$refs.footer.updateTagDatas(id, form, editId, modelName);\n      this.tagDataUpdateState(id, form, true);\n    },\n    checkTagCreate(id, form, editId, modelName) {\n      this.$refs.footer.updateTagDatas(id, form, editId, modelName);\n      var properties = this.$_.cloneDeep(form);\n      properties.FEATURE_ID = editId;\n      properties.FEATURE = modelName;\n      this.tagDatas.push({\n        id: id,\n        cloneTag: properties,\n        tag: [],\n        modelName: \"QUALITY_TAG\",\n      });\n      // this.tagDataUpdateState(id, form, true);\n    },\n    drawerOpened() {\n      this.$refs.content.contentClass({\n        contentClass: \"little\",\n      });\n    },\n    drawerClose() {\n      this.$refs.content.contentClass({\n        contentClass: \"\",\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\nbody {\n  width: 100vw;\n  height: 100vh;\n  margin: 0px;\n}\n.home {\n  float: left;\n  width: 100%;\n  height: 100%;\n  position: relative;\n  background-color: #f2f4f9;\n}\n.el-popover,\n.el-select__popper,\n.el-notification,\n.el-image-viewer__wrapper,\n.el-message {\n  z-index: 4445 !important;\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}